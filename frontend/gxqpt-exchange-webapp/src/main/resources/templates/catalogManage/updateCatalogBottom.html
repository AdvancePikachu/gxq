<!doctype html>
<html>
<head>
	<meta http-equiv="Expires" content="0"/>
	<meta name="renderer" content="webkit"/>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<link rel="stylesheet" type="text/css" href="${_static}/js/lib/bootstrap/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="${_static}/js/lib/ValidateForm/Validform.css">
	<link rel="stylesheet" type="text/css" href="${_static}/css/com.css">
	<link rel="stylesheet" type="text/css" href="${_static}/css/index.css">
</head>
<body class="bgNone">
<div class="workspace-body">
	<div id="console-container" class="clearfix">
		<div class="col-sm-12">
			<div class="general_list_main clearfix">
				<div class="main_bottom col-lg-12 col-sm-12">
					<div class="view_item">
						<div class="col-lg-6 col-md-6 col-sm-6">
							<table class="table default-table tab-border-no-layer borderCollapse">
								<caption>修改后</caption>
								<tbody>
								<tr>
									<th width="120">目录名称：</th>
									<td id="dirName" class="viewTd">
									</td>
								</tr>
								<!-- <tr>
									<th>目录编码：</th>
									<td id="dirCode" class="viewTd">
									</td>
								</tr> -->
								<tr>
									<th>目录标识：</th>
									<td id="dirType" class="viewTd">
										2
									</td>
								</tr>
								<tr>
									<th>目录描述：</th>
									<td id="desc" class="viewTd">
									</td>
								</tr>
								<tr>
									<th>是否为底层目录：</th>
									<td class="viewTd" >
										是
									</td>
								</tr>
								<tr class="isBottom">
									<th width="210">主题分类：</th>
									<td id="theme" class="viewTd">
									</td>
								</tr>
								<tr class="isBottom">
									<th>行业分类：</th>
									<td id="industry" class="viewTd">
									</td>
								</tr>
								<tr class="isBottom">
									<th>服务分类：</th>
									<td id="service" class="viewTd">
									</td>
								</tr>
								<tr class="isBottom">
									<th>开放方式：</th>
									<td id="openWay" class="viewTd">
									</td>
								</tr>
								<tr class="shareType" style="display: none;">
									<th>共享方式：</th>
									<td id="shareWay" class="viewTd">
									</td>
								</tr>
								<tr class="isBottom">
									<th>数据类型：</th>
									<td id="dataType" class="viewTd">
									</td>
								</tr>
								<tr class="reason" style="display: none;">
									<th>不共享、不开放、有条件共享原因：</th>
									<td id="reason" class="viewTd">
									</td>
								</tr>
								<tr class="reason" style="display: none;">
									<th class="vtop">默认共享单位：</th>
									<td id="shareUnit" class="viewTd">
									</td>
								</tr>
								</tbody>
							</table>
							<button type="button" class="btn-submit hidden"></button>
						</div>
						<div class="col-lg-6 col-md-6 col-sm-6">
							<table class="table default-table tab-border-no-layer borderCollapse">
								<caption>修改前</caption>
								<tbody>
								<tr>
									<th width="120">目录名称：</th>
									<td id="dirNamePre" class="viewTd">
									</td>
								</tr>
								<!-- <tr>
									<th>目录编码：</th>
									<td id="dirCodePre" class="viewTd">
									</td>
								</tr> -->
								<tr>
									<th>目录标识：</th>
									<td id="dirTypePre" class="viewTd">
										2
									</td>
								</tr>
								<tr>
									<th>目录描述：</th>
									<td id="descPre" class="viewTd">
									</td>
								</tr>
								<tr>
									<th>是否为底层目录：</th>
									<td class="viewTd" >
										是
									</td>
								</tr>
								<tr class="isBottom">
									<th width="210">主题分类：</th>
									<td id="themePre" class="viewTd">
									</td>
								</tr>
								<tr class="isBottom">
									<th>行业分类：</th>
									<td id="industryPre" class="viewTd">
									</td>
								</tr>
								<tr class="isBottom">
									<th>服务分类：</th>
									<td id="servicePre" class="viewTd">
									</td>
								</tr>
								<tr class="isBottom">
									<th>开放方式：</th>
									<td id="openWayPre" class="viewTd">
									</td>
								</tr>
								<tr class="shareTypePre" style="display: none;">
									<th>共享方式：</th>
									<td id="shareWayPre" class="viewTd">
									</td>
								</tr>
								<tr class="isBottom">
									<th>数据类型：</th>
									<td id="dataTypePre" class="viewTd">
									</td>
								</tr>
								<tr class="reasonPre" style="display: none;">
									<th>不共享、不开放、有条件共享原因：</th>
									<td id="reasonPre" class="viewTd">
									</td>
								</tr>
								<tr class="reasonPre" style="display: none;">
									<th class="vtop">默认共享单位：</th>
									<td id="shareUnitPre" class="viewTd">
									</td>
								</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript" src="${_static}/js/lib/jquery/jquery.min.js" charset="utf-8"></script>
<script type="text/javascript" src="${_static}/js/lib/jquery/jquery.cookie.js"  charset="utf-8"></script>
<script type="text/javascript" src="${_static}/js/hengyun/hengyun_ajax.js"></script>
<script type="text/javascript" src="${_static}/js/lib/serializeJSON/jquery.serializejson.min.js"></script>
<script type="text/javascript" src="${_static}/js/lib/layer/layer.js"></script>
<script type="text/javascript" src="${_static}/js/lib/ValidateForm/Validform_v5.3.2_min.js"></script>
<script type="text/javascript" src="${_static}/js/lib/ValidateForm/Valid.js"></script>
<script type="text/javascript" src="${_static}/js/com.js" charset="utf-8"></script>
<script type="text/javascript">
	var unitList=[];
    getUnitList();
    function getCatalogInfo(id){
        ajaxHengyun({
            type:"GET",

            dataType: 'json',
            url:  '${_gate_url}/api/exchange/directory/get',
            data:{id:id},
            success:function(rows){
                if(rows.data){
                    var rowsObject=dealElement(rows.data);
                    $("#dirName").text(rowsObject.dirName);
                    $("#applyCode").text(rowsObject.applyCode);
                    $("#dirCode").text(rowsObject.dirCode);
                    $("#desc").text(rowsObject.desc);
                    var themeName="";
                    if(rowsObject.themeOneName!=""){
                        themeName+=rowsObject.themeOneName;
                        if(rowsObject.themeTwoName!=""){
                            themeName+=">"+rowsObject.themeTwoName;
                            if(rowsObject.themeThreeName!=""){
                                themeName+=">"+rowsObject.themeThreeName;
                            }
						}
					}
                    $("#theme").text(themeName);
                    var industryName="";
                    if(rowsObject.industryOneName!=""){
                        industryName+=rowsObject.industryOneName;
                        if(rowsObject.industryTwoName!=""){
                            industryName+=">"+rowsObject.industryTwoName;
                            if(rowsObject.industryThreeName!=""){
                                industryName+=">"+rowsObject.industryThreeName;
                            }
                        }
                    }
                    $("#industry").text(industryName);
                    var serviceName="";
                    if(rowsObject.serviceOneName!=""){
                        serviceName+=rowsObject.serviceOneName;
                        if(rowsObject.serviceTwoName!=""){
                            serviceName+=">"+rowsObject.serviceTwoName;
                            if(rowsObject.serviceThreeName!=""){
                                serviceName+=">"+rowsObject.serviceThreeName;
                            }
                        }
                    }
                    $("#service").text(serviceName);
                    if(rowsObject.dataType==1){
                        $("#dataType").text("结构化数据");
                    }
                    if(rowsObject.dataType==2){
                        $("#dataType").text("非结构化数据");
                    }
                    if(rowsObject.shareWay==1){
                        $("#shareWay").text("无条件共享");
                        $(".reason").css("display","none");
                    }
                    if(rowsObject.shareWay==2){
                        $("#shareWay").text("有条件共享");
                        $(".reason").css("display","table-row");
                    }
                    if(rowsObject.shareWay==3){
                        $("#shareWay").text("不共享");
                        $(".reason").css("display","table-row");
                    }
                    if(rowsObject.openWay==1){
                        $("#openWay").text("开放");
                        $(".shareType,.reason").css("display","none");
                    }
                    if(rowsObject.openWay==2){
                        $("#openWay").text("不开放");
                        $(".shareType").css("display","table-row");
                    }
                    $("#reason").text(rowsObject.reason);
                    if(rowsObject.unitIds.length>0){
                        var shareUnitName=[];
                        rowsObject.unitIds.forEach(function(value,index){
                            unitList.forEach(function(item,num){
                                if(value==item.id){
                                    shareUnitName.push(item.name_);
                                }
                            });
                        });
                        $("#shareUnit").text(shareUnitName.join("，"));
                    }
                }
            }
        });
    }
    function getCatalogInfoPre(id){
        ajaxHengyun({
            type:"GET",

            dataType: 'json',
            url:  '${_gate_url}/api/exchange/directory/getDirectoryWare',
            data:{id:id},
            success:function(rows){
                if(rows.data){
                    var rowsObject=dealElement(rows.data);
                    $("#dirNamePre").text(rowsObject.dirName);
                    $("#applyCodePre").text(rowsObject.applyCode);
                    $("#dirCodePre").text(rowsObject.dirCode);
                    $("#descPre").text(rowsObject.desc);
                    var themeName="";
                    if(rowsObject.themeOneName!=""){
                        themeName+=rowsObject.themeOneName;
                        if(rowsObject.themeTwoName!=""){
                            themeName+=">"+rowsObject.themeTwoName;
                            if(rowsObject.themeThreeName!=""){
                                themeName+=">"+rowsObject.themeThreeName;
                            }
						}
					}
                    $("#themePre").text(themeName);
                    var industryName="";
                    if(rowsObject.industryOneName!=""){
                        industryName+=rowsObject.industryOneName;
                        if(rowsObject.industryTwoName!=""){
                            industryName+=">"+rowsObject.industryTwoName;
                            if(rowsObject.industryThreeName!=""){
                                industryName+=">"+rowsObject.industryThreeName;
                            }
                        }
                    }
                    $("#industryPre").text(industryName);
                    var serviceName="";
                    if(rowsObject.serviceOneName!=""){
                        serviceName+=rowsObject.serviceOneName;
                        if(rowsObject.serviceTwoName!=""){
                            serviceName+=">"+rowsObject.serviceTwoName;
                            if(rowsObject.serviceThreeName!=""){
                                serviceName+=">"+rowsObject.serviceThreeName;
                            }
                        }
                    }
                    $("#servicePre").text(serviceName);
                    if(rowsObject.dataType==1){
                        $("#dataTypePre").text("结构化数据");
                    }
                    if(rowsObject.dataType==2){
                        $("#dataTypePre").text("非结构化数据");
                    }
                    if(rowsObject.shareWay==1){
                        $("#shareWayPre").text("无条件共享");
                        $(".reasonPre").css("display","none");
                    }
                    if(rowsObject.shareWay==2){
                        $("#shareWayPre").text("有条件共享");
                        $(".reasonPre").css("display","table-row");
                    }
                    if(rowsObject.shareWay==3){
                        $("#shareWayPre").text("不共享");
                        $(".reasonPre").css("display","table-row");
                    }
                    if(rowsObject.openWay==1){
                        $("#openWayPre").text("开放");
                        $(".shareTypePre,.reasonPre").css("display","none");
                    }
                    if(rowsObject.openWay==2){
                        $("#openWayPre").text("不开放");
                        $(".shareTypePre").css("display","table-row");
                    }
                    $("#reasonPre").text(rowsObject.reason);
                    if(rowsObject.unitIds.length>0){
                        var shareUnitName=[];
                        rowsObject.unitIds.forEach(function(value,index){
                            unitList.forEach(function(item,num){
                                if(value==item.id){
                                    shareUnitName.push(item.name_);
                                }
                            });
                        });
                        $("#shareUnitPre").text(shareUnitName.join("，"));
                    }
                }
            }
        });
    }
    function getUnitList(){//获取单位列表
        ajaxHengyun({
            type: 'GET',
            url: '${_gate_url}/api/exchange/directory/getOrgList ',
            datatype: "json",
            success: function (rows) {
                if(rows.data){
                    unitList=rows.data;
                }
				getCatalogInfo("${id}");
				getCatalogInfoPre("${id}");
            }
        });
    }
</script>
</body>
</html>