<template>
  <Layout>
    <Content>
      <Breadcrumb>
        <BreadcrumbItem>接入管理</BreadcrumbItem>
        <BreadcrumbItem>我的应用</BreadcrumbItem>
      </Breadcrumb>
      <Card>
        <Form
          ref="formValidate"
          inline
          :label-width="100"
          :model="searchCondition">
          <FormItem label="应用名称：">
            <Input
              type="text"
              v-model="searchCondition.name">
            </Input>
          </FormItem>
          <FormItem label="应用分类：">
            <Select v-model="searchCondition.category" style="width:140px">
              <Option v-for="item in categoryList" :value="item.value" :key="item.value">{{item.label}}</Option>
            </Select>
          </FormItem>
          <FormItem label="应用类型：">
            <Select v-model="searchCondition.type" style="width:140px">
              <Option v-for="item in typeList" :value="item.value" :key="item.value">{{item.label}}</Option>
            </Select>
          </FormItem>
          <FormItem label="提供方：">
            <Select v-model="searchCondition.provider" style="width:140px">
              <Option v-for="item in providerList" :value="item.value" :key="item.value">{{item.label}}</Option>
            </Select>
          </FormItem>
          <FormItem>
            <Button type="primary" @click="handleSubmit">查询</Button>
          </FormItem>
        </Form>
        <hy-table
          highlight-row
          :columns="tableList.columns"
          :data="tableList.data"
          :total="40"
          :pageSize="10"
          pageType="small"
          show-elevator
          show-sizer
          class="access-list"
          @on-page-change="getList" />
      </Card>
    </Content>
  </Layout>
</template>

<script>
export default {
  data () {
    return {
      searchCondition: {
        // 应用名称
        name: '',
        // 应用分类
        category: '',
        // 应用类型
        type: '',
        // 提供方
        provider: ''
      },
      tableList: {
        columns: [
          {
            type: 'index',
            title: '序号',
            width: 60,
            align: 'center'
          },
          {
            title: '服务器IP',
            key: 'name'
          },
          {
            title: '进程ID',
            key: 'age'
          },
          {
            title: '进程名称',
            key: 'address'
          },
          {
            title: '用户',
            key: 'age'
          },
          {
            title: '发生日期',
            key: 'address'
          },
          {
            title: '处理状态',
            key: 'age'
          },
          {
            title: '处理人',
            key: 'address'
          },
          {
            title: '处理时间',
            key: 'age'
          },
          {
            title: '操作',
            key: 'address',
            render: (h, params) => {
              const vm = this
              const age = params.row.age
              const id = params.row.age
              const info = h('span', {
                class: 'handle',
                domProps: {
                  innerHTML: '部署信息'
                },
                on: {
                  click () {
                    vm.$router.push({
                      path: '/accessInfo',
                      query: {
                        id: id
                      }
                    })
                  }
                }
              })
              const upgrade = h('span', {
                class: 'handle',
                domProps: {
                  innerHTML: '应用升级'
                },
                on: {
                  click () {
                    vm.$router.push({
                      path: '/accessUpgrade',
                      query: {
                        id: id
                      }
                    })
                  }
                }
              })
              const analyze = h('span', {
                class: 'handle',
                domProps: {
                  innerHTML: '应用分析'
                },
                on: {
                  click () {
                    vm.$router.push({
                      path: '/accessAnalyze',
                      query: {
                        id: id
                      }
                    })
                  }
                }
              })
              switch (age) {
                case 1:
                  return h('div', [info, upgrade, analyze])
                case 2:
                  return h('div', [info, analyze])
                default:
                  return h('span', '--')
              }
            }
          }
        ],
        data: [
          {
            name: 'John Brown',
            age: 1,
            address: 'New York No. 1 Lake Park',
            date: '2016-10-03'
          },
          {
            name: 'Jim Green',
            age: 2,
            address: 'London No. 1 Lake Park',
            date: '2016-10-01'
          }
        ]
      },
      categoryList: [{
        value: 1,
        label: '分类1'
      }],
      typeList: [{
        value: 2,
        label: '类型1'
      }],
      providerList: [{
        value: 3,
        label: '提供方1'
      }]
    }
  },
  methods: {
    // 点击查询按钮
    handleSubmit () {
      alert()
    },
    // 从服务端获取列表数据
    getList (pageNo, pageSize) {
      console.log(pageNo)
      console.log(pageSize)
    }
  }
}
</script>

<style lang='less'>
.access-list{
  span.handle{
    margin: 0 5px;
    display: inline-block;
    cursor: pointer;
    &:hover{
      color: #57a3f3;
    }
  }
}
</style>
