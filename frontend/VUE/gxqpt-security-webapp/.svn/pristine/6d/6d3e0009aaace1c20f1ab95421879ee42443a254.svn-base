<template>
	<Layout>
		<Content>
			<Breadcrumb>
				<BreadcrumbItem>国信优易</BreadcrumbItem>
				<BreadcrumbItem>服务器管理</BreadcrumbItem>
			</Breadcrumb>
			<Card>
				<Form :model="serverData" ref="searchformData" inline :label-width="80">
                    <FormItem label="CPU" prop="cpu">
                        <Select v-model="serverData.cpu">
							<Option value="2核">2核</Option>
							<Option value="4核">4核</Option>
						</Select>
                    </FormItem>
					<FormItem label="内存" prop="operatingMemory">
						<Select v-model="serverData.operatingMemory">
							<Option value="8GB">8GB</Option>
							<Option value="16GB">16GB</Option>
						</Select>
					</FormItem>
                    <FormItem label="操作系统" prop="operatingSystem">
						<Select v-model="serverData.operatingSystem">
							<Option value="Windows server 32位">Windows server 32位</Option>
							<Option value="Linux 64位">Linux 64位</Option>
						</Select>
					</FormItem>
                    <FormItem label="所属网络" prop="network">
						<Select v-model="serverData.network">
							<Option value="政务外网">政务外网</Option>
							<Option value="互联网">互联网</Option>
							<Option value="专网">专网</Option>
						</Select>
					</FormItem>
					<FormItem>
						<Button type="info" @click="search">查询</Button>
						<Button type="info" @click="add">新增</Button>
					</FormItem>
				</Form>
                <hy-table
                    highlight-row
                    :columns="safetyEvalCol"
                    :data="safetyEvalData"
                    :total="40"
                    :pageSize="10"
                    :border='border'
                    pageType="small"
                    show-elevator
                    show-sizer
                    class="access-list"
                    @on-page-change="getList" />
			</Card>
		</Content>
	</Layout>
</template>
<script>
export default {
    data() {
        return {
            serverData:{},
            border:true,
            safetyEvalCol: [{
                title: '序号',
                type: 'index',
                width: 80,
                align: 'center'
            }, {
                title: '实例ID',
                key: 'serviceID'
            }, {
                title: '管理单位',
                key: 'serviceUnit'
            }, {
                title: '管理员',
                key: 'serviceAdmin'
            }, {
                title: 'CPU核数',
                key: 'serviceCPU'
            }, {
                title: '内存',
                key: 'serviceMemory'
            }, {
                title: '操作系统',
                key: 'OS'
            }, {
                title: '所属网络',
                key: 'network'
            }, {
                title: '开通时间',
                key: 'beginDate'
            }, {
                title: '最近变更时间',
                key: 'changeDate',
            }, {
                title: '变更次数',
                key: 'changeNum',
                render: (h, params) => {
                    const vm = this
                    const num = params.row.changeNum
                    const change = h('span', {
                        class: 'handle',
                        domProps: {
                            innerHTML: num
                        },
                        on: {
                            click () {
                                vm.gotoCtrl(num)
                            }
                        }
                    })
                    return h('div', [change])
                }
            }, {
                title: '操作',
                type: 'act',
                width: 200,
                align: 'center',
                render: (h, params) => {
                    return h('div', [
                        h('span', {
                            class: 'handle',
                            on: {
                                click: () => {
                                    this.$router.push({path:'/server/detail'});
                                }
                            }
                        }, '详情'),
                        h('span', {
                            class: 'handle',
                            on: {
                                click: () => {
                                    console.log("删除");
                                }
                            }
                        }, '删除'),
                        h('span', {
                            class: 'handle',
                            on: {
                                click: () => {
                                    this.$router.push({path:'/server/edit'});
                                }
                            }
                        }, '修改')
                    ]);
                }
            }],
            safetyEvalData: [{
                serviceID: '1111',
                serviceUnit:'高新区',
                serviceAdmin: '张三',
                serviceCPU: '4核',
                serviceMemory: '4GB',
                OS: 'Windows server 2008  64位',
                network: '政务外网',
                beginDate: '2018/7/9 12:00:00',
                changeDate:'2018/7/9 12:00:00',
                changeNum: 1,
            }, {
                serviceID: '1111',
                serviceUnit:'高新区',
                serviceAdmin: '张三',
                serviceCPU: '4核',
                serviceMemory: '4GB',
                OS: 'Windows server 2008  64位',
                network: '政务外网',
                beginDate: '2018/7/9 12:00:00',
                changeDate:'2018/7/9 12:00:00',
                changeNum: 2,
            }, {
                serviceID: '1111',
                serviceUnit:'高新区',
                serviceAdmin: '张三',
                serviceCPU: '4核',
                serviceMemory: '4GB',
                OS: 'Windows server 2008  64位',
                network: '政务外网',
                beginDate: '2018/7/9 12:00:00',
                changeDate:'2018/7/9 12:00:00',
                changeNum: 3,
            }, {
                serviceID: '1111',
                serviceUnit:'高新区',
                serviceAdmin: '张三',
                serviceCPU: '4核',
                serviceMemory: '4GB',
                OS: 'Windows server 2008  64位',
                network: '政务外网',
                beginDate: '2018/7/9 12:00:00',
                changeDate:'2018/7/9 12:00:00',
                changeNum: 4,
            }, {
                serviceID: '1111',
                serviceUnit:'高新区',
                serviceAdmin: '张三',
                serviceCPU: '4核',
                serviceMemory: '4GB',
                OS: 'Windows server 2008  64位',
                network: '政务外网',
                beginDate: '2018/7/9 12:00:00',
                changeDate:'2018/7/9 12:00:00',
                changeNum: 5,
            }],
        }
    },
    methods: {
        search(){
            console.log("查看");
        },
        add(){
            console.log("新增");
        },
        // 从服务端获取列表数据
        getList (pageNo, pageSize) {
            console.log(pageNo)
            console.log(pageSize)
        },
        // 操作
        gotoCtrl (idx) {
            console.log(idx);
        }
    }
}
</script>
<style lang="less">
	.act-btn-group{
		button{
			margin: 0 12px;
		}
    }
    .ivu-modal-footer{
        display: none;
    }
    .access-list{
        span.handle{
            margin: 0 5px;
            display: inline-block;
            cursor: pointer;
            &:hover{
            color: #57a3f3;
            }
        }
    }
</style>