<template>
	<Layout>
		<Content>
			<Breadcrumb>
				<BreadcrumbItem>统一监控平台</BreadcrumbItem>
				<BreadcrumbItem>服务审核</BreadcrumbItem>
			</Breadcrumb>
			<Card>
				<Form :model="serviceData" ref="searchformData" inline :label-width="80">
                    <FormItem label="服务类别" prop="type">
                        <Select v-model="serviceData.type">
							<Option value="类别1">类别1</Option>
							<Option value="类别2">类别2</Option>
						</Select>
                    </FormItem>
                    <FormItem label="服务时间" prop="serviceDate">
						<DatePicker type="daterange" v-model="serviceData.serviceDate" show-week-numbers placement="bottom-end" placeholder="请选择服务时间" style="width: 200px"></DatePicker>
					</FormItem>
                    <FormItem label="评分" prop="point">
                        <Input v-model="serviceData.point" placeholder="请输入评分"></Input>
					</FormItem>
					<FormItem label="状态" prop="state">
						<Select v-model="serviceData.state">
							<Option value="已提交">已提交</Option>
							<Option value="未提交">未提交</Option>
							<Option value="已申请">已申请</Option>
							<Option value="申请中">申请中</Option>
						</Select>
					</FormItem>
				</Form>
				<Table border ref="safetyEvalTable" :columns="safetyEvalCol" :data="safetyEvalData"></Table>
				<div class="bottom-bar">
					<Page :total="100" show-sizer show-elevator></Page>
				</div>
			</Card>
		</Content>
        <dealDetailModal :evalModal='dealDetail' :closeModal='closeDealDetail'></dealDetailModal>
        <serviceDocModal :evalModal='serviceDoc' :closeModal='closeServiceDoc'></serviceDocModal>
        <agreeModal :evalModal='agree' :closeModal='closeAgreeModal'></agreeModal>
        <rejectModal :evalModal='reject' :closeModal='closeRejectModal'></rejectModal>
	</Layout>
</template>
<script>
import dealDetailModal from "./serviceApplyModal/dealDetailModal.vue";
import serviceDocModal from "./serviceApplyModal/serviceDocModal.vue";
import agreeModal from "./serviceApplyModal/agreeModal.vue";
import rejectModal from "./serviceApplyModal/rejectModal.vue";
export default {
    components: {
        dealDetailModal,
        serviceDocModal,
        agreeModal,
        rejectModal
    },
    created(){
        console.log(document.querySelector('.ivu-modal-footer'));
    },
    data() {
        return {
            dealDetail: false,
            serviceDoc:false,
            agree:false,
            reject:false,
            serviceData:{},
            safetyEvalCol: [{
                title: '序号',
                type: 'index',
                width: 80,
                align: 'center'
            }, {
                title: '服务类别',
                key: 'serviceType'
            }, {
                title: '服务对象',
                key: 'serviceObj'
            }, {
                title: '服务分类',
                key: 'serviceClassify'
            }, {
                title: '服务名称',
                key: 'serviceName'
            }, {
                title: '服务简介',
                key: 'serviceDes'
            }, {
                title: '涉及系统',
                key: 'involveSystem'
            }, {
                title: '服务时间',
                key: 'serviceDate'
            }, {
                title: '申请人',
                key: 'proposer'
            }, {
                title: '审批意见',
                key: 'approvalOpinion'
            }, {
                title: '处理人',
                key: 'manager'
            }, {
                title: '结束时间',
                key: 'endDate'
            }, {
                title: '状态',
                key: 'state'
            }, {
                title: '评分',
                key: 'point'
            }, {
                title: '服务建议',
                key: 'serviceAdvice'
            }, {
                title: '操作',
                type: 'act',
                width: 200,
                align: 'center',
                render: (h, params) => {
                    return h('div', [
                        h('Button', {
                            props: {
                                type: 'primary',
                                size: 'small'
                            },
                            style: {
                                marginRight: '5px'
                            },
                            on: {
                                click: () => {
                                    this.dealDetail = true;
                                }
                            }
                        }, '处理'),
                        h('Button', {
                            props: {
                                type: 'primary',
                                size: 'small'
                            },
                            style: {
                                marginRight: '5px'
                            },
                            on: {
                                click: () => {
                                    this.serviceDoc = true;
                                }
                            }
                        }, '服务报告'),
                        h('Button', {
                            props: {
                                type: 'primary',
                                size: 'small'
                            },
                            style: {
                                marginTop: '5px'
                            },
                            on: {
                                click: () => {
                                    this.$router.push({
                                        name:'serviceDetail',
                                        params:{
                                            serviceDetails:JSON.stringify({dis:false,show:true}),
                                            dealDetails:JSON.stringify({dis:false,show:true})
                                        }
                                    });
                                }
                            }
                        }, '详情')
                    ]);
                }
            }],
            safetyEvalData: [{
                serviceType: '硬件运维服务',
                serviceObj:'网络运维服务',
                serviceClassify: '例行操作',
                serviceName: '网络设备巡检服务',
                serviceDes: '对设备运行状态进行检查和分析，完成巡检报告',
                involveSystem: '日志管理系统；统一监管系统',
                serviceDate: '2018/8/9-2018/8/10',
                proposer:'王二',
                approvalOpinion:'审批意见',
                manager:'张三',
                endDate: '2018/8/9',
                state: '已完结',
                point: '5分',
                serviceAdvice: '',
            }, {
                serviceType: '硬件运维服务',
                serviceObj:'网络运维服务',
                serviceClassify: '例行操作',
                serviceName: '网络设备巡检服务',
                serviceDes: '对设备运行状态进行检查和分析，完成巡检报告',
                involveSystem: '日志管理系统；统一监管系统',
                serviceDate: '2018/8/9-2018/8/10',
                proposer:'王二',
                approvalOpinion:'审批意见',
                manager:'张三',
                endDate: '2018/8/9',
                state: '已完结',
                point: '5分',
                serviceAdvice: '',
            },{
                serviceType: '硬件运维服务',
                serviceObj:'网络运维服务',
                serviceClassify: '例行操作',
                serviceName: '网络设备巡检服务',
                serviceDes: '对设备运行状态进行检查和分析，完成巡检报告',
                involveSystem: '日志管理系统；统一监管系统',
                serviceDate: '2018/8/9-2018/8/10',
                proposer:'王二',
                approvalOpinion:'审批意见',
                manager:'张三',
                endDate: '2018/8/9',
                state: '已完结',
                point: '5分',
                serviceAdvice: '',
            },{
                serviceType: '硬件运维服务',
                serviceObj:'网络运维服务',
                serviceClassify: '例行操作',
                serviceName: '网络设备巡检服务',
                serviceDes: '对设备运行状态进行检查和分析，完成巡检报告',
                involveSystem: '日志管理系统；统一监管系统',
                serviceDate: '2018/8/9-2018/8/10',
                proposer:'王二',
                approvalOpinion:'审批意见',
                manager:'张三',
                endDate: '2018/8/9',
                state: '已完结',
                point: '5分',
                serviceAdvice: '',
            },{
                serviceType: '硬件运维服务',
                serviceObj:'网络运维服务',
                serviceClassify: '例行操作',
                serviceName: '网络设备巡检服务',
                serviceDes: '对设备运行状态进行检查和分析，完成巡检报告',
                involveSystem: '日志管理系统；统一监管系统',
                serviceDate: '2018/8/9-2018/8/10',
                proposer:'王二',
                approvalOpinion:'审批意见',
                manager:'张三',
                endDate: '2018/8/9',
                state: '已完结',
                point: '5分',
                serviceAdvice: '',
            },{
                serviceType: '硬件运维服务',
                serviceObj:'网络运维服务',
                serviceClassify: '例行操作',
                serviceName: '网络设备巡检服务',
                serviceDes: '对设备运行状态进行检查和分析，完成巡检报告',
                involveSystem: '日志管理系统；统一监管系统',
                serviceDate: '2018/8/9-2018/8/10',
                proposer:'王二',
                approvalOpinion:'审批意见',
                manager:'张三',
                endDate: '2018/8/9',
                state: '已完结',
                point: '5分',
                serviceAdvice: '',
            },{
                serviceType: '硬件运维服务',
                serviceObj:'网络运维服务',
                serviceClassify: '例行操作',
                serviceName: '网络设备巡检服务',
                serviceDes: '对设备运行状态进行检查和分析，完成巡检报告',
                involveSystem: '日志管理系统；统一监管系统',
                serviceDate: '2018/8/9-2018/8/10',
                proposer:'王二',
                approvalOpinion:'审批意见',
                manager:'张三',
                endDate: '2018/8/9',
                state: '已完结',
                point: '5分',
                serviceAdvice: '',
            },{
                serviceType: '硬件运维服务',
                serviceObj:'网络运维服务',
                serviceClassify: '例行操作',
                serviceName: '网络设备巡检服务',
                serviceDes: '对设备运行状态进行检查和分析，完成巡检报告',
                involveSystem: '日志管理系统；统一监管系统',
                serviceDate: '2018/8/9-2018/8/10',
                proposer:'王二',
                approvalOpinion:'审批意见',
                manager:'张三',
                endDate: '2018/8/9',
                state: '已完结',
                point: '5分',
                serviceAdvice: '',
            },{
                serviceType: '硬件运维服务',
                serviceObj:'网络运维服务',
                serviceClassify: '例行操作',
                serviceName: '网络设备巡检服务',
                serviceDes: '对设备运行状态进行检查和分析，完成巡检报告',
                involveSystem: '日志管理系统；统一监管系统',
                serviceDate: '2018/8/9-2018/8/10',
                proposer:'王二',
                approvalOpinion:'审批意见',
                manager:'张三',
                endDate: '2018/8/9',
                state: '已完结',
                point: '5分',
                serviceAdvice: '',
            },{
                serviceType: '硬件运维服务',
                serviceObj:'网络运维服务',
                serviceClassify: '例行操作',
                serviceName: '网络设备巡检服务',
                serviceDes: '对设备运行状态进行检查和分析，完成巡检报告',
                involveSystem: '日志管理系统；统一监管系统',
                serviceDate: '2018/8/9-2018/8/10',
                proposer:'王二',
                approvalOpinion:'审批意见',
                manager:'张三',
                endDate: '2018/8/9',
                state: '已完结',
                point: '5分',
                serviceAdvice: '',
            },{
                serviceType: '硬件运维服务',
                serviceObj:'网络运维服务',
                serviceClassify: '例行操作',
                serviceName: '网络设备巡检服务',
                serviceDes: '对设备运行状态进行检查和分析，完成巡检报告',
                involveSystem: '日志管理系统；统一监管系统',
                serviceDate: '2018/8/9-2018/8/10',
                proposer:'王二',
                approvalOpinion:'审批意见',
                manager:'张三',
                endDate: '2018/8/9',
                state: '已完结',
                point: '5分',
                serviceAdvice: '',
            },{
                serviceType: '硬件运维服务',
                serviceObj:'网络运维服务',
                serviceClassify: '例行操作',
                serviceName: '网络设备巡检服务',
                serviceDes: '对设备运行状态进行检查和分析，完成巡检报告',
                involveSystem: '日志管理系统；统一监管系统',
                serviceDate: '2018/8/9-2018/8/10',
                proposer:'王二',
                approvalOpinion:'审批意见',
                manager:'张三',
                endDate: '2018/8/9',
                state: '已完结',
                point: '5分',
                serviceAdvice: '',
            }],
        }
    },
    methods: {
        closeDealDetail() {//关闭处理详情modal
            this.dealDetail = false;
        },
        closeServiceDoc(){//关闭服务报告modal
            this.serviceDoc = false;
        },
        closeAgreeModal(){//关闭同意modal
            this.agree = false;
        },
        closeRejectModal(){//关闭驳回modal
            this.reject = false;
        },
    }
}
</script>
<style lang="less" scoped="scoped">
	.act-btn-group{
		button{
			margin: 0 12px;
		}
    }
    .ivu-modal-footer{
        display: none;
    }
</style>