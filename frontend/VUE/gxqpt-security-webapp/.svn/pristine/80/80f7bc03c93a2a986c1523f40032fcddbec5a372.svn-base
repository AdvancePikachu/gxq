/* 统一监管平台 */
import Vue from 'vue'
import Router from 'vue-router'
import store from '@/store'
import unitWarnAnalyze from '@/view/supervise/unitWarnAnalyze'// 单位预警分析
import unitWarnAnalyzeView from '@/view/supervise/unitWarnAnalyzeView'// 单位预警分析详情
import departmentWarnAnalyzeView from '@/view/supervise/departmentWarnAnalyzeView'// 部门预警分析详情
import departmentWarnAnalyze from '@/view/supervise/departmentWarnAnalyze'// 部门预警分析
import personnelAnalyze from '@/view/supervise/personnelAnalyze'// 人员预警分析
import departmentPersonAnalyze from '@/view/supervise/departmentPersonAnalyze'// 自己部门人员预警分析
import departPersonnelAnalyze from '@/view/supervise/departPersonnelAnalyze'// 部门人员预警分析
import personnelAnalyzeView from '@/view/supervise/personnelAnalyzeView'// 人员预警分析详情
import earlyWarning from '@/view/supervise/earlyWarning'// 预警台账
import earlyWarningDeal from '@/view/supervise/earlyWarningDeal'// 预警处理台账
import earlyWarningResult from '@/view/supervise/earlyWarningResult'// 预警处理结果台账
import leaderCockpit from '@/view/supervise/leaderCockpit'// 领导驾驶舱
import applicationWarnAnalyze from '@/view/supervise/applicationWarnAnalyze'// 应用预警分析
import applicationWarnAnalyzeView from '@/view/supervise/applicationWarnAnalyzeView'// 应用预警分析详情

Vue.use(Router)

const router = new Router({
  routes: [
    {
      path: '/unitWarnAnalyze',
      name: 'unitWarnAnalyze',
      component: unitWarnAnalyze
    },
    {
      path: '/unitWarnAnalyzeView/:id',
      name: 'unitWarnAnalyzeView',
      component: unitWarnAnalyzeView
    },
    {
      path: '/departmentWarnAnalyzeView/:id',
      name: 'departmentWarnAnalyzeView',
      component: departmentWarnAnalyzeView
    },
    {
      path: '/personnelAnalyze',
      name: 'personnelAnalyze',
      component: personnelAnalyze
    },
    {
      path: '/departmentPersonAnalyze',
      name: 'departmentPersonAnalyze',
      component: departmentPersonAnalyze
    },
    {
      path: '/departPersonnelAnalyze',
      name: 'departPersonnelAnalyze',
      component: departPersonnelAnalyze
    },
    {
      path: '/personnelAnalyzeView/:id',
      name: 'personnelAnalyzeView',
      component: personnelAnalyzeView
    },
    {
      path: '/earlyWarning',
      name: 'earlyWarning',
      component: earlyWarning
    },
    {
      path: '/earlyWarningDeal',
      name: 'earlyWarningDeal',
      component: earlyWarningDeal
    },
    {
      path: '/earlyWarningResult',
      name: 'earlyWarningResult',
      component: earlyWarningResult
    },
    {
      path: '/leaderCockpit',
      name: 'leaderCockpit',
      component: leaderCockpit
    },
    {
      path: '/applicationWarnAnalyze',
      name: 'applicationWarnAnalyze',
      component: applicationWarnAnalyze
    },
    { // 单个应用详情
      path: '/applicationWarnAnalyzeView/:id',
      name: 'applicationWarnAnalyzeView',
      component: applicationWarnAnalyzeView
    },
    {
      path: '/departmentWarnAnalyze',
      name: 'departmentWarnAnalyze',
      component: departmentWarnAnalyze
    }
  ]
})

router.beforeEach((to, from, next) => {
  if (to.matched.length === 0) {
    router.replace('/earlyWarning')
    next(false)
  }
  hy_auth_login('supervise') // 登陆验证
  store.commit('GETUSERINFO') // 设置用户信息
  store.dispatch('getAuthButton', to.query.resourceId);//获取权限按钮
  next()
})

export default router
