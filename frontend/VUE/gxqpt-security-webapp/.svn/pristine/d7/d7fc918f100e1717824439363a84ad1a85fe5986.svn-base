<!-- 人员预警处理对比分析图 -->
<template>
	<div id="bar3D"></div>
</template>

<script>
export default {
	data() {
		return {
			hours: [],
			days: [],
			optionData: [],
		}
	},
	methods: {
		refresh(data) {
			this.hours = data.xAxis3D;
			this.days = data.yAxis3D;
			this.optionData = data.optionData;
			this.initLineBar();
		},
		initLineBar() {
			// 基于准备好的dom，初始化echarts实例
			let lineBar = this.$echarts.init(document.getElementById('bar3D'))
			let hours = this.hours;
			let days = this.days;
			let data = this.optionData;
			const option = {
				tooltip: {
					formatter: function(x) {
						return "应用：" + hours[x.data.value[0]] + "<br />部门：" + days[x.data.value[1]] + "<br />预警数：" + x.data.value[2];
					},
				},
				visualMap: {
					max: 20,
					inRange: {
						color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
					}
				},
				xAxis3D: {
					type: 'category',
					data: hours,
					name: "",
					axisLabel: {
						show: true,
						textStyle: {
							color: '#B2B2B2',
							fontSize: 12,
						},
					},
				},
				yAxis3D: {
					type: 'category',
					data: days,
					name: "",
					axisLabel: {
						show: true,
						textStyle: {
							color: '#B2B2B2',
							fontSize: 12,
						},
					},
				},
				zAxis3D: {
					type: 'value',
					name: "预警数量",
					nameTextStyle: {
						color: '#fff'
					},
					axisLabel: {
						show: true,
						textStyle: {
							color: '#B2B2B2',
							fontSize: 12,
						},
					},
				},
				grid3D: {
					boxWidth: 200,
					boxDepth: 80,
					viewControl: {
						// projection: 'orthographic'
					},
					light: {
						main: {
							intensity: 1.2,
							shadow: true
						},
						ambient: {
							intensity: 0.3
						}
					},
					axisLabel: {
						show: true,
						textStyle: {
							color: '#B2B2B2',
							fontSize: 12,
						},
					},
				},
				series: [{
					type: 'bar3D',
					data: data.map(function(item) {
						return {
							value: [item[0], item[1], item[2]],
						}
					}),
					shading: 'lambert',

					label: {
						textStyle: {
							fontSize: 16,
							borderWidth: 1
						}
					},
					emphasis: {
						label: {
							textStyle: {
								fontSize: 20,
								color: '#900'
							}
						},
						itemStyle: {
							color: '#900'
						}
					}
				}]
			}
			// 使用刚指定的配置项和数据显示图表。
			lineBar.setOption(option);
		}
	}
}
</script>

<style lang="less" scoped>
	#bar3D {
		width: 100%;
		height: 100%;
	}
</style>